title: Tournament
type: object
properties:
  id:
    type: string
  name:
    type: string
  game:
    type: object
    description: Configuration of the game used by the tournament
    properties:
      map:
        $ref: ./map.v1.yaml
      config:
        type: object
        description: General game configuration
        properties:
          timeStep:
            type: integer
          runningInClientSide:
            type: boolean
          enemySpawningDeltaTicks:
            type: integer
          credits:
            type: integer
          lifes:
            type: integer
      enemies:
        type: object
        description: Configuration of each type of enemy
        properties:
          soldier:
            $ref: './enemy.v1.yaml'
          runner:
            $ref: './enemy.v1.yaml'
          healer:
            $ref: './enemy.v1.yaml'
          blob:
            $ref: './enemy.v1.yaml'
          flier:
            $ref: './enemy.v1.yaml'
      turrets:
        type: object
        description: Configuration of each type of turret
        properties:
          projectile:
            $ref: './turret.v1.yaml'
          laser:
            $ref: './turret.v1.yaml'
          launch:
            $ref: './turret.v1.yaml'
          glue:
            $ref: './turret.v1.yaml'
      waves:
        type: array
        description: Configuration of the waves templates
        items:
          type: object
          properties:
            waveReward:
              type: integer
            extend:
              type: integer
            maxExtend:
              type: integer
            enemies:
              type: array
              items:
                type: object
                properties:
                  type:
                    type: string
                    description: Type of the enemy
                    enum:
                      - soldier
                      - runner
                      - healer
                      - blob
                      - flier
                  t:
                    type: integer
                    description: Ticks from start of wave
    required:
      - map
      - config
      - enemies
      - turrets
      - waves
  playerCount:
    type: integer
    default: 0
  phase:
    type: string
    enum:
      - commit
      - reveal
      - round
      - end
  deadline:
    type: string
    format: date-time
  totalRounds:
    type: integer
    description: Total number of rounds of the rounds phase until a winner is declared
  currentRound:
    type: integer
    description: Current round if the tournament is in the round phase
  lastRound:
    type: integer
    description: Round in which I lost to my opponent
  currentOpponent:
    type: string
    description: Id of my opponent score in the current round
  winner:
    type: string
    description: Id of the winning score
  _links:
    type: object
    $ref: '#/components/schemas/links'
required:
  - id
  - name
  - game
  - playerCount
  - phase
